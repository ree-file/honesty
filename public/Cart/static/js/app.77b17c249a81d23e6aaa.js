webpackJsonp([1],{"1w2X":function(t,e){},DEGK:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},o,!1,function(t){a("ymcE")},null,null).exports,i=a("/ocq"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cartcontent",attrs:{id:"cartcontent"}},[a("el-popover",{ref:"popover2",attrs:{placement:"bottom-end",trigger:"click"}},[a("ul",{staticClass:"list-group"},t._l(t.$store.state.discount,function(e){return a("li",{staticClass:"list-group-item",staticStyle:{"border-width":"0"}},[a("div",{staticClass:"discount"},[a("div",{staticClass:"discount-title"},[a("span",{domProps:{textContent:t._s("supplier_favorable"==e.type?"店铺":"商品")}})]),t._v(" "),a("span",{staticClass:"discount-content"},[t._v(t._s(e.content))])])])}))]),t._v(" "),a("el-row",[a("el-col",[a("div",{staticClass:"grid-content bg-purple-dark title"},[a("span",[t._v(" "+t._s(t.$store.state.title))])])])],1),t._v(" "),a("el-row",{staticClass:"announcement",attrs:{gutter:10}},[a("el-col",{attrs:{push:1,xs:4,sm:4,md:8,lg:9,xl:11}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("span",[a("span",[t._v(t._s(t.$store.state.tip))])])])]),t._v(" "),a("el-col",{attrs:{xs:13,sm:14,md:8,lg:9,xl:11}},[a("div",{staticClass:"grid-content bg-purple content"},[a("span",[t._v(t._s(t.$store.state.content))])])]),t._v(" "),a("el-col",{attrs:{xs:6,sm:6,md:8,lg:9,xl:11}},[a("div",{staticClass:"grid-content bg-purple info"},[a("span",{staticClass:"detail_show"},[a("el-button",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],attrs:{type:"text"}},[t._v(t._s(t.$store.state.info))]),a("i",{staticClass:"el-icon-caret-bottom"})],1)])])],1)],1)},staticRenderFns:[]};var c={name:"content-tab",mounted:function(){this.change("buy","comment")},methods:{change:function(t,e){"comment"==t&&this.open(),document.getElementById(t).style.color="black",document.styleSheets[0].addRule("#"+t+"::after","background-color: #2395ff"),document.styleSheets[0].addRule("#"+e+"::after","background-color: #eee"),document.getElementById(e).style.color="#666"},open:function(){this.$message("暂时未开放，敬请期待")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab"},[a("el-row",[a("el-col",{attrs:{span:12},nativeOn:{click:function(e){t.change("buy","comment")}}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{attrs:{id:"buy"}},[t._v("购买")])])]),t._v(" "),a("el-col",{attrs:{span:12},nativeOn:{click:function(e){t.change("comment","buy")}}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{attrs:{id:"comment"}},[t._v("评价")])])])],1)],1)},staticRenderFns:[]};var d={name:"cartheader",data:function(){return{}},components:{cartcontenttop:a("VU/8")({name:"cartcontent",data:function(){return{}}},r,!1,function(t){a("xI+O")},null,null).exports,cartcontenttab:a("VU/8")(c,l,!1,function(t){a("i41o")},null,null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("div",{staticClass:"cartheader"},[e("img",{attrs:{src:this.$store.state.supplier_img}})]),this._v(" "),e("cartcontenttop"),this._v(" "),e("cartcontenttab")],1)},staticRenderFns:[]};var p={name:"cartfooter",data:function(){return{img:["/static/img/zhaicart.png","/static/img/buycart.png"],show:!1,payway:0}},methods:{addtocart:function(t){this.$store.dispatch("add",this.$store.state.goods[t].pivot.goods_id)},movefromcart:function(t){this.$store.dispatch("move",this.$store.state.goods[t].pivot.goods_id)},clear:function(){this.$store.dispatch("clear")},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},open4:function(){var t=this;this.$alert('<div style="text-align:center"><input v-model="payway" type="radio" name="payway" value="1">支付宝</input></div><div style="text-align:center"><input ref="payway" v-model="payway" type="radio" name="payway" value="2">微&nbsp&nbsp&nbsp信</input></div>',"选择支付方式",{dangerouslyUseHTMLString:!0,center:!0,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showClose:!0,roundButton:!0,cancelButtonClass:"cancel",customClass:"payBox",beforeClose:function(e,a,s){if("confirm"==e)for(var o=document.getElementsByName("payway"),n=0;n<o.length;n++)if(o[n].checked){var i={payway:o[n].value,goods:t.$store.state.goods,openid:t.$route.query.openid};t.$store.dispatch("pay",i)}s()}})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cartfooter"},[a("el-popover",{ref:"popover1",attrs:{placement:"bottom",trigger:"click",width:"300","popper-class":"popfixed"}},[0==t.$store.state.fee?t._t("default",[a("span",[t._v("还没有商品")])]):t._e(),t._v(" "),0!=t.$store.state.fee?t._t("default",[a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-button",{attrs:{type:"text",size:"medium"},nativeOn:{click:function(e){t.clear()}}},[t._v(" 清空")])],1),t._v(" "),a("div",[a("ul",{staticClass:"list-group",staticStyle:{"border-width":"0px"}},t._l(t.$store.state.goods,function(e,s){return e.number?a("li",{staticClass:"list-group-item",staticStyle:{"border-right-width":"0","border-left-width":"0","border-top-width":"0px","border-bottom-width":"2px","border-color":"#eee"}},[a("el-row",[a("el-col",{attrs:{xs:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{display:"flex","justify-content":"flex-start","align-items":"baseline"}},[a("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(e.goods_name))]),a("span",{staticStyle:{color:"rgb(255, 102, 0)","font-size":"x-small"}},[t._v("x")]),a("span",{staticStyle:{"font-size":"x-small",color:"#333"}},[t._v(t._s(e.number))])])]),t._v(" "),a("el-col",{attrs:{xs:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{display:"flex","justify-content":"flex-end"}},[a("span",[t._v(t._s((e.price*e.number).toFixed(2)))])])]),t._v(" "),a("el-col",{attrs:{xs:8,pull:1}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{display:"flex","align-items":"flex-end","justify-content":"flex-end"}},[a("div",{staticClass:"addbutton",class:{wid:0!=e.number}},[0!=e.number?a("span",{staticClass:"el-icon-remove-outline",staticStyle:{background:"white"},on:{click:function(e){t.movefromcart(s)}}}):t._e(),t._v(" "),0!=e.number?a("span",{staticClass:"number"},[t._v(t._s(e.number))]):t._e(),t._v(" "),a("span",{staticClass:"el-icon-circle-plus ",on:{click:function(e){t.addtocart(s)}}})])])])],1)],1):t._e()}))])]):t._e()],2),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"circle",class:{changecart:t.$store.state.fee>0}},[a("div",{},[t.$store.state.fee<=0?a("img",{attrs:{src:t.img[0]}}):t._e(),t._v(" "),t.$store.state.fee>0?a("img",{attrs:{src:t.img[1]}}):t._e()])])])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticClass:"Settlement"},[a("span",{staticStyle:{color:"white","font-size":"medium"}},[t._v(t._s(t.$store.state.fee))])])])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple ",class:{showBtn:t.$store.state.fee>0}},[a("div",{},[t.$store.state.fee>0?a("span",{staticStyle:{color:"white","font-size":"1.4em"},on:{click:t.open4}},[t._v("去结算")]):t._e()])])])],1)],1)},staticRenderFns:[]};var f={name:"category",data:function(){return{}},methods:{choose:function(t){for(var e=document.getElementsByName("item"),a=0;a<e.length;a++)a==t?(e[t].style.background="white",e[t].style.color="#333",document.querySelector("#cate_"+(t+1)).scrollIntoView()):(e[a].style.background="#f8f8f8",e[a].style.color="#666")}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"list-group items"},t._l(this.$store.state.category,function(e,s){return a("li",{staticClass:"list-group-item item",attrs:{name:"item"},on:{click:function(e){t.choose(s)}}},[a("span",[t._v(t._s(e.cate_name))])])}))},staticRenderFns:[]};var g={name:"category_content",data:function(){return{}},created:function(){this.$route.query.openid?this.$store.dispatch("loadsupplier",this.$route.query.supplier_id):window.location.href="https://www.zhaischool.com/honest/#/?supplier_id=1"},methods:{addtocart:function(t){this.$store.dispatch("add",this.$store.state.goods[t].pivot.goods_id)},movefromcart:function(t){this.$store.dispatch("move",this.$store.state.goods[t].pivot.goods_id)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warn panel"},[a("ul",t._l(t.$store.state.category,function(e){return a("li",{attrs:{id:"li_"+e.id}},[a("div",{attrs:{id:"cate_"+e.id}},[a("span",[t._v(t._s(e.cate_name))])]),t._v(" "),a("ul",{staticClass:"cate_items"},t._l(t.$store.state.goods,function(s,o){return s.category_id==e.id?a("li",{staticClass:"cate_item"},[a("el-row",[a("el-col",{attrs:{xs:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",{staticClass:"img-border"},[a("div",[a("img",{staticClass:"img-responsive",attrs:{src:s.img}})])])])]),t._v(" "),a("el-col",{attrs:{xs:6}},[a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{height:"5.6em",position:"relative"}},[a("div",{staticStyle:{display:"inline-block",height:"auto"}},[a("span",[t._v(t._s(s.goods_name))])]),t._v(" "),a("div",{staticStyle:{display:"inline-block",height:"auto",position:"absolute",bottom:"0",left:"0"}},[a("strong",{staticStyle:{color:"#f60"}},[a("span",{staticClass:"price"},[t._v(t._s(s.price))])])])])]),t._v(" "),a("el-col",{attrs:{xs:9,pull:1}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{display:"flex","flex-direction":"row-reverse",height:"5.6em","align-items":"flex-end"}},[a("div",{staticClass:"addbutton",class:{wid:0!=s.number}},[0!=s.number?a("span",{staticClass:"el-icon-remove-outline",staticStyle:{background:"white"},on:{click:function(e){t.movefromcart(o)}}}):t._e(),t._v(" "),0!=s.number?a("span",{staticClass:"number"},[t._v(t._s(s.number))]):t._e(),t._v(" "),a("span",{staticClass:"el-icon-circle-plus ",on:{click:function(e){t.addtocart(o)}}})])])])],1)],1):t._e()}))])}))])},staticRenderFns:[]};var h={name:"Cart",components:{cartheader:a("VU/8")(d,u,!1,function(t){a("1w2X")},null,null).exports,cartfooter:a("VU/8")(p,m,!1,function(t){a("uvwB")},null,null).exports,category:a("VU/8")(f,v,!1,function(t){a("R6Bt")},null,null).exports,categorycontent:a("VU/8")(g,_,!1,function(t){a("DEGK")},null,null).exports}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-header",[e("cartheader")],1),this._v(" "),e("el-container",{staticClass:"contain"},[e("el-aside",{attrs:{width:"30%"}},[e("category")],1),this._v(" "),e("el-main",[e("categorycontent")],1)],1),this._v(" "),e("el-footer",[e("cartfooter")],1)],1)},staticRenderFns:[]};var b=a("VU/8")(h,y,!1,function(t){a("w84h")},null,null).exports;s.default.use(i.a);var w=new i.a({routes:[{path:"/",name:"Cart",component:b},{path:"/Comment",name:"Comment"}]}),C=a("NYxO"),x=a("mtWM"),$=a.n(x),S=a("Rf8U"),k=a.n(S);s.default.use(k.a,$.a),s.default.use(C.a);var E=new C.a.Store({state:{goods:[],fee:0,category:[],title:"",tip:"诚信",content:"",info:"",supplier_img:"",supplier_id:"",discount:[{title:"商品",content:"饼干一限时打折"},{title:"满减",content:"满15减4"}]},mutations:{addtocart:function(t,e){for(var a=0;a<t.goods.length;a++)if(t.goods[a].pivot.goods_id==e){t.goods[a].number++,t.fee=(parseFloat(t.fee)+parseFloat(t.goods[a].price)).toFixed(2);break}},movefromcart:function(t,e){for(var a=0;a<t.goods.length;a++)if(t.goods[a].pivot.goods_id==e){t.goods[a].number--,t.fee=(parseFloat(t.fee)-parseFloat(t.goods[a].price)).toFixed(2);break}},clearcart:function(t){for(var e=0;e<t.goods.length;e++)t.goods[e].number=0;t.fee=0},supplier:function(t,e){t.goods=e.data.data[0].goods,t.category=e.data.data[0].category,t.title=e.data.data[0].name,t.content="诚信率为"+e.data.data[0].honesty_rate,t.info=e.data.data[0].announcements.length+"个优惠",t.supplier_img=e.data.data[0].img,t.title=e.data.data[0].supplier_name,t.discount=e.data.data[0].announcements,t.supplier_id=e.data.data[0].id},topay:function(){}},actions:{add:function(t,e){t.commit("addtocart",e)},move:function(t,e){t.commit("movefromcart",e)},clear:function(t){t.commit("clearcart")},loadsupplier:function(t,e){s.default.axios.get("http://honesty.zhaischool.com/api/supplier/"+e).then(function(e){t.commit("supplier",e)})},pay:function(t,e){$.a.post("http://honesty.zhaischool.com/api/supplier/"+this.state.supplier_id+"/buy",e).then(function(t){console.log(t),1==t.data.data.order_payway?window.location.href="https://www.zhaischool.com/mobile/pay/alipayapi.php?out_trade_no="+t.data.data.id+"&total_fee="+t.data.data.order_pay+"&honesty=1":2==t.data.data.order_payway&&(window.location.href="https://www.zhaischool.com/mobile/weixinpay.php?honesty_out_trade_no=0"+t.data.data.id)})}}}),B=a("zL8q"),F=a.n(B);a("tvR6");s.default.config.productionTip=!1,s.default.use(F.a),new s.default({el:"#app",router:w,store:E,components:{App:n},template:"<App/>"})},R6Bt:function(t,e){},i41o:function(t,e){},tvR6:function(t,e){},uvwB:function(t,e){},w84h:function(t,e){},"xI+O":function(t,e){},ymcE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.77b17c249a81d23e6aaa.js.map